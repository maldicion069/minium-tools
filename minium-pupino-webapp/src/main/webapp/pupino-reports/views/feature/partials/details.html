

<div class="panel">
   <div class="panel-heading">
      <div class="btn-group pull-right">
         <a class="btn btn-primary" ng-href="{{location}}/editor/{{feature.uri}}?line=1" target="_blank">Go to File</a>
         <!-- Button trigger modal -->
         <button class="btn btn-default" href="#stats" data-toggle="modal" data-target="#summary">
         Summary
         </button>
      </div>
      <div class="row">
         <h2>
            List of Scenarios for {{feature.rawName}}
            <div class="col-sm-3 col-md-3">
               <div class="btn-group pull-left" data-toggle="buttons">
                  <label class="btn btn-default" ng-click="cucumberStatus = 'PASSED'">
                  <input type="radio"></input>
                  <i class="fa fa-square text-green"></i> Success
                  </label>
                  <label class="btn btn-default" ng-click="cucumberStatus = 'FAILED'">
                  <input type="radio"></input>
                  <i class="fa fa-square text-red"></i> Failling
                  </label>
                  <label class="btn btn-default" ng-click="cucumberStatus = ''">
                  <input type="radio"></input>
                  <i class="fa fa-square"></i> All
                  </label>
               </div>
            </div>
            <div class="col-sm-2 col-md-2">
               <form class="form-inline">
                  <div class="input-append">
                     <input type="text" ng-model="query" class="form-control" placeholder="search">
                  </div>
               </form>
            </div>
         </h2>
      </div>
   </div>
   <!-- panel-heading-->
   <div class="panel-body">
      <!-- BACKGROUND -->
      <accordion close-others="oneAtATime">
         <accordion-group is-open="status.open">
            <accordion-heading>
               <i ng-if="isPassed(background.status)" class="success fa fa-check-square "></i>
               <i ng-if="!isPassed(background.status)" class="danger fa fa-bug "></i>
               <strong>{{background.keyword}}</strong>
               <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
               <!-- <a class="pull-right btn btn-primary btn-xs" ng-href="{{location}}/editor/{{step.match.location}}?line=1" target="_blank">Step file</a> -->
            </accordion-heading>
            <table class="table table-primary table-list">
               <thead>
                  <tr>
                     <th>Step</th>
                     <th></th>
                     <th class="text-center"></th>
                  </tr>
               </thead>
               <tbody>
                  <tr ng-repeat="step in background.steps">
                     <td>
                        <p ng-class="{'danger' : !isPassed(step.status),'success' : isPassed(step.status)}"> {{step.rawName}} {{step.rows.length}}
                        </p>
                        <!-- TABLES ROW -->
                        <table>
                           <tbody>
                              <tr ng-repeat="row in step.rows">
                                 <td ng-repeat="cell in row.cells track by $index" style="padding: 7px;">
                                    {{cell}}
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </td>
                     <td>
                        <a class="btn btn-info btn-xs" ng-href="{{location}}/editor/{{step.match.location }}?line={{step.match.location}}" target="_blank">
                        Go Step file
                        </a>
                     </td>
                     <td>
                         <span class="label" ng-class="checkStatus(step.status,'label-')">
                           {{step.status}}
                        </span>
                     </td>
                  </tr>
               </tbody>
            </table>
         </accordion-group>
      </accordion>
      <!-- end of background colapse -->
      <!-- SCENARIOS -->
      <accordion close-others="oneAtATime">
         <accordion-group is-open="status.open" ng-repeat="element in scenarios | filter:query | filter:{status :cucumberStatus}
            ">
            <accordion-heading>
               <!-- HEADER -->
               <i ng-if="isPassed(element.status)" class="success fa fa-check-square "></i>
               <i ng-if="!isPassed(element.status)" class="danger fa fa-bug "></i> {{element.keyword}} <strong>{{element.rawName}}</strong>
               <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
               <span class="hide">{{element.status}}</span>
            </accordion-heading>
            <!-- CONTENT -->
            <table class="table table-primary table-list table-striped table-condensed">
               <thead>
                  <tr>
                     <th>Step</th>
                     <th></th>
                     <th>Duration</th>
                     <th class="text-center"></th>
                  </tr>
               </thead>
               <tbody>
                  <tr ng-repeat="step in element.steps">
                     <td style="width: 750px">
                        <p ng-class="checkStatus(step.status,'')"> 
                           {{step.rawName}}
                        </p>
                        <!-- TABLES ROW -->
                        <!-- {{step.errorMessage}} -->
                        <pre ng-if="step.status === 'FAILED'" data-dd-collapse-text="50">{{step.errorMessage}}</pre>

                     </td>
                     <td>
                        <a class="btn btn-primary btn-xs" ng-href="{{location}}/editor/{{feature.uri}}?line={{step.line}}" target="_blank">
                        Go Feature File
                        </a>
                        <a class="btn btn-info btn-xs" ng-href="{{location}}/editor/{{step.match.location | split:':':0}}?line={{step.match.location | split:':':1}}" target="_blank">
                        Go Step file
                        </a>
                     </td>
                     <td>
                        <!-- DIV by 1000000 to convert in milliseconds -->
                        {{(step.duration/1000000) | durationMilliseconds}}
                     </td>
                     
                     <td style="max-width: 400px;">


                        <span class="label" ng-class="checkStatus(step.status,'label-')">
                        {{step.status}}
                        </span>

                        <!-- SCREENSHOT -->
                        <span ng-if="isFailOrSkipped(step.status)">
                           <br> <br>
                           <img src="data:{{step.embeddings[0].mime_type}};base64,{{step.embeddings[0].data}}" alt="" ng-if="step.embeddings !== null"/>

                           <!-- <p ng-bind-html="renderHtml(step.name)"></p>  -->
                        </span>

                     </td>
                  </tr>
               </tbody>
            </table>
         </accordion-group>
      </accordion>



      <!-- Modal -->
      <div id="summary" class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
         <div class="modal-dialog">
            <div class="modal-content">
               <br>
               <div class="bs-example bs-example-tabs">
                  <ul id="myTab" class="nav nav-tabs">
                     <li class="active"><a show-tab href="#summary" data-toggle="tab">Summary </a>
                     </li>
                     <li class=""><a show-tab href="#stats" data-toggle="tab">Statistics</a>
                     </li>
                  </ul>
               </div>
               <div class="modal-body">
                  <div id="myTabContent" class="tab-content">
                     <div class="tab-pane fade active in" id="summary">
                        <table class="table table-primary table-list">
                           <thead>
                              <tr>
                                 <th>Result</th>
                                 <th>Feature</th>
                                 <th>Total</th>
                                 <th>Passed</th>
                                 <th>Failed</th>
                                 <th>Duration</th>
                                 <th>File</th>
                                 <th class="text-center"></th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr ng-class="{'danger' : !isPassed(feature.status),'success' : isPassed(feature.status)}">
                                 <td>
                                    <i ng-if="isPassed(feature.status)" class="success fa fa-check-square fa-2x"></i>
                                    <i ng-if="!isPassed(feature.status)" class="danger fa fa-bug"></i>
                                 </td>
                                 <td>
                                    <a ui-sref="global.feature({ id: project.id, buildId: buildId, featureURI: (feature.uri | escape) })">
                                    {{feature.rawName}}
                                    </a>
                                 </td>
                                 <td>
                                    {{feature.numberOfSteps}}
                                 </td>
                                 <td style="background-color:grenn;">
                                    {{feature.numberOfPasses}}
                                 </td>
                                 <td>
                                    {{feature.numberOfFailures}}
                                 </td>
                                 <td>
                                    {{feature.durationOfSteps}}
                                 </td>
                                 <td>
                                    <a class='btn btn-info btn-xs' ng-href="{{location}}/editor/{{feature.uri}}?line=1" target="_blank">
                                    Go to File
                                    </a>
                                 </td>
                                 <td>
                                    <div class="btn-group">
                                       <a data-toggle="dropdown" class="dropdown-toggle">
                                       <i class="fa fa-cog"></i>
                                       </a>
                                       <ul role="menu" class="dropdown-menu pull-right">
                                          <li><a href="#">View</a>
                                          </li>
                                          <li><a href="#">Close</a>
                                          </li>
                                          <li><a href="#">Resolve</a>
                                          </li>
                                          <li class="divider"></li>
                                          <li><a href="#">Assign</a>
                                          </li>
                                          <li><a href="#">Comment</a>
                                          </li>
                                       </ul>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <!-- table-responsive -->
                     </div>
                     <div class="tab-pane fade" id="stats">
                        <div class="row">
                           <div class="col-md-12">
                              <!-- Line chart -->
                              <div class="box box-primary">
                                 <div class="box-header">
                                    <i class="fa fa-bar-chart-o"></i>
                                    <h3 class="box-title">Features stats</h3>
                                 </div>
                                 <div class="box-body">
                                    <nvd3-pie-chart data="exampleData" id="exampleId" width="550" height="250" x="xFunction()" y="yFunction()" showLabels="true">
                                       <svg></svg>
                                    </nvd3-pie-chart>
                                 </div>
                                 <!-- /.box-body-->
                              </div>
                              <!-- /.box -->
                              <div class="panel panel-dark panel-alt">
                                 <div class="panel-heading">
                                    <!-- panel-btns -->
                                    <h5 class="panel-title">Unresolved By Priority</h5>
                                 </div>
                                 <!-- panel-heading -->
                                 <div class="panel-body panel-table">
                                    <div class="table-responsive">
                                       <table class="table">
                                          <thead>
                                             <tr class="table-head-alt">
                                                <th>Priority</th>
                                                <th>Issues</th>
                                                <th>Percentage</th>
                                                <th>&nbsp;</th>
                                             </tr>
                                          </thead>
                                          <tbody>
                                             <tr>
                                                <td><a href="">Critical</a>
                                                </td>
                                                <td>1</td>
                                                <td>
                                                   <div class="progress">
                                                      <div style="width: 2%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="2" role="progressbar" class="progress-bar progress-bar-danger">
                                                         <span class="sr-only">2% Complete (success)</span>
                                                      </div>
                                                   </div>
                                                </td>
                                                <td>2%</td>
                                             </tr>
                                             <tr>
                                                <td><a href="">Major</a>
                                                </td>
                                                <td>3</td>
                                                <td>
                                                   <div class="progress">
                                                      <div style="width: 15%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="15" role="progressbar" class="progress-bar progress-bar-warning">
                                                         <span class="sr-only">15% Complete (success)</span>
                                                      </div>
                                                   </div>
                                                </td>
                                                <td>15%</td>
                                             </tr>
                                             <tr>
                                                <td><a href="">Minor</a>
                                                </td>
                                                <td>15</td>
                                                <td>
                                                   <div class="progress">
                                                      <div style="width: 52%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="52" role="progressbar" class="progress-bar progress-bar-primary">
                                                         <span class="sr-only">52% Complete (success)</span>
                                                      </div>
                                                   </div>
                                                </td>
                                                <td>52%</td>
                                             </tr>
                                             <tr>
                                                <td><a href="">Trivial</a>
                                                </td>
                                                <td>9</td>
                                                <td>
                                                   <div class="progress">
                                                      <div style="width: 20%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="20" role="progressbar" class="progress-bar progress-bar-success">
                                                         <span class="sr-only">20% Complete (success)</span>
                                                      </div>
                                                   </div>
                                                </td>
                                                <td>20%</td>
                                             </tr>
                                             <tr>
                                                <td><a href="">Blocker</a>
                                                </td>
                                                <td>2</td>
                                                <td>
                                                   <div class="progress">
                                                      <div style="width: 6%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="6" role="progressbar" class="progress-bar progress-bar-danger">
                                                         <span class="sr-only">6% Complete (success)</span>
                                                      </div>
                                                   </div>
                                                </td>
                                                <td>6%</td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                    <!-- table-responsive -->
                                 </div>
                                 <!-- panel-body -->
                              </div>
                              <!-- panel -->
                           </div>
                           <!-- /.col -->
                        </div>
                        <div class="row">
                           <div class="col-lg-3 col-xs-6">
                              <!-- small box -->
                              <div class="small-box bg-green">
                                 <div class="inner">
                                    <h3>
                                       1030
                                    </h3>
                                    <p>
                                       Steps Passed
                                    </p>
                                 </div>
                                 <div class="icon">
                                    <i class="fa fa-check-square"></i>
                                 </div>
                                 <a href="#" class="small-box-footer">
                                 More info <i class="fa fa-arrow-circle-right"></i>
                                 </a>
                              </div>
                           </div>
                           <!-- ./col -->
                           <div class="col-lg-3 col-xs-6">
                              <!-- small box -->
                              <div class="small-box bg-red">
                                 <div class="inner">
                                    <h3>
                                       53
                                    </h3>
                                    <p>
                                       Step Fail
                                    </p>
                                 </div>
                                 <div class="icon">
                                    <i class="fa fa-bug"></i>
                                 </div>
                                 <a href="#" class="small-box-footer">
                                 More info <i class="fa fa-arrow-circle-right"></i>
                                 </a>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="modal-footer">
                  <center>
                     <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </center>
               </div>
            </div>
         </div>
      </div>
   </div>
   <!-- panel-body -->
</div>

